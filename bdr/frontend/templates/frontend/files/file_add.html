{% extends "bdr/base.html" %}

{% block title %}Add file{% endblock %}

{% block sidebar %}
    <nav>
        <h2>Actions</h2>
        <ul class="nav nav-pills nav-stacked">
            <li role="presentation"><a href="{% url 'bdr.frontend:dataset-detail' slug=dataset.slug %}">
                <span class="glyphicon glyphicon-file" aria-hidden="true"></span> View
            </a></li>
            <li role="presentation"><a href="{% url 'bdr.frontend:dataset-edit' slug=dataset.slug %}">
                <span class="glyphicon glyphicon-pencil" aria-hidden="true"></span> Edit
            </a></li>
            <li class="active" role="presentation"><a href="{% url 'bdr.frontend:file-add' slug=dataset.slug %}">
                <span class="glyphicon glyphicon-plus" aria-hidden="true"></span> Add file
            </a></li>
            <li role="presentation"><a href="{% url 'bdr.frontend:dataset-delete' slug=dataset.slug %}">
                <span class="glyphicon glyphicon-remove" aria-hidden="true"></span> Delete
            </a></li>
       </ul>
    </nav>
{% endblock %}

{% block content %}
    <header class="page-header">
        <h1>
            Add new file
            <a class="small" href="{{ dataset.get_absolute_url }}">{{ dataset.name }}</a>
        </h1>
    </header>
    <section>
    <p class="alert alert-warning alert-dismissable" role="alert">
        <strong>Note:</strong> Any required <a class="alert-link" href="{% url 'bdr.backend:formats' %}">file
        formats</a> should be defined before proceeding.

        <button class="close" type="button" data-dismiss="alert" aria-label="Close">
            <span class="glyphicon glyphicon-remove-circle" aria-hidden="true"></span>
        </button>
    </p>
    <form class="form-horizontal" action="{% url 'bdr.frontend:file-add' slug=dataset.slug %}" method="post"
          enctype="multipart/form-data">
        {% csrf_token %}
        {{ wizard.management_form }}
        {% for field in form.hidden_fields %}
            {{ field }}
        {% endfor %}

        {% with form_errors=form.non_field_errors %}
        {% if form_errors %}
        <ul class="errorlist text-danger">
        {% for error in form_errors %}
            <li>{{ error }}</li>
        {% endfor %}
        </ul>
        {% endif %}
        {% endwith %}

        {% for field in form.visible_fields %}
            {% include 'frontend/fragments/field.html' %}
        {% endfor %}

        <div class="form-group">
            <div class="form-inline col-xs-12 text-right">
                <input type="submit" class="btn btn-primary" value="Next">
                <a class="btn btn-default" href="{% url 'bdr.frontend:dataset-detail' slug=dataset.slug %}">Cancel</a>
            </div>
        </div>
    </form>
    </section>
{% endblock %}
